<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reactjs | Vckkk</title>
    <meta name="description" content="Do what you want">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.fef5045a.css" as="style"><link rel="preload" href="/assets/js/app.ea509887.js" as="script"><link rel="preload" href="/assets/js/5.e1836220.js" as="script"><link rel="prefetch" href="/assets/js/10.2be47945.js"><link rel="prefetch" href="/assets/js/11.c10c468c.js"><link rel="prefetch" href="/assets/js/12.c91a394a.js"><link rel="prefetch" href="/assets/js/2.51671d88.js"><link rel="prefetch" href="/assets/js/3.136b693b.js"><link rel="prefetch" href="/assets/js/4.5262c1f8.js"><link rel="prefetch" href="/assets/js/6.cd28b8ee.js"><link rel="prefetch" href="/assets/js/7.dd579077.js"><link rel="prefetch" href="/assets/js/8.d06dea88.js"><link rel="prefetch" href="/assets/js/9.96e1c7af.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fef5045a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vckkk</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Pages/" class="nav-link router-link-active">Pages</a></div><div class="nav-item"><a href="http://www.webhbz.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Pages/" class="nav-link router-link-active">Pages</a></div><div class="nav-item"><a href="http://www.webhbz.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Pages/" class="sidebar-link">å†™åœ¨å‰é¢</a></li><li><a href="/Pages/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/Pages/JavaScript.html" class="sidebar-link">JavaScript</a></li><li><a href="/Pages/Reactjs.html" class="active sidebar-link">Reactjs</a></li><li><a href="/Pages/demo.html" class="sidebar-link">ç½‘ç»œåŸºç¡€</a></li><li><a href="/Pages/ali.html" class="sidebar-link">é˜¿é‡Œreactå…¨å®¶æ¡¶</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="reactjs"><a href="#reactjs" aria-hidden="true" class="header-anchor">#</a> Reactjs</h1> <h2 id="ä»€ä¹ˆæ˜¯react"><a href="#ä»€ä¹ˆæ˜¯react" aria-hidden="true" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯React</h2> <pre><code>*** A JavaScript library for building user interfaces ***

ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·é¡µé¢çš„JavaScriptåº“ã€‚å¦‚æœä½ ç†Ÿæ‚‰ MVC æ¦‚å¿µçš„è¯ï¼Œé‚£ä¹ˆ React çš„ç»„ä»¶å°±ç›¸å½“äº MVC é‡Œé¢çš„ Viewã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰ä¹Ÿæ²¡å…³ç³»ï¼Œä½ å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºï¼ŒReact.js å°†å¸®åŠ©æˆ‘ä»¬å°†ç•Œé¢åˆ†æˆäº†å„ä¸ªç‹¬ç«‹çš„å°å—ï¼Œæ¯ä¸€ä¸ªå—å°±æ˜¯ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¹‹é—´å¯ä»¥ç»„åˆã€åµŒå¥—ï¼Œå°±æˆäº†æˆ‘ä»¬çš„é¡µé¢ã€‚

ä¸€ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€å’Œè¡Œä¸ºæœ‰å¯èƒ½æ˜¯ç”±æŸäº›æ•°æ®å†³å®šçš„ã€‚è€Œæ•°æ®æ˜¯å¯èƒ½å‘ç”Ÿæ”¹å˜çš„ï¼Œè¿™æ—¶å€™ç»„ä»¶çš„æ˜¾ç¤ºå½¢æ€å°±ä¼šå‘ç”Ÿç›¸åº”çš„æ”¹å˜ã€‚è€Œ React.js ä¹Ÿæä¾›äº†ä¸€ç§éå¸¸é«˜æ•ˆçš„æ–¹å¼å¸®åŠ©æˆ‘ä»¬åšåˆ°äº†æ•°æ®å’Œç»„ä»¶æ˜¾ç¤ºå½¢æ€ä¹‹é—´çš„åŒæ­¥ã€‚

React.js ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªåº“ã€‚å®ƒåªæä¾› UI ï¼ˆviewï¼‰å±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨å®é™…çš„é¡¹ç›®å½“ä¸­ï¼Œå®ƒå¹¶ä¸èƒ½è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„é—®é¢˜ï¼Œéœ€è¦ç»“åˆå…¶å®ƒçš„åº“ï¼Œä¾‹å¦‚ Reduxã€React-router ç­‰æ¥ååŠ©æä¾›å®Œæ•´çš„è§£å†³æ–¹æ³•ã€‚
</code></pre> <h2 id="ä»€ä¹ˆæ˜¯ç»„ä»¶åŒ–"><a href="#ä»€ä¹ˆæ˜¯ç»„ä»¶åŒ–" aria-hidden="true" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯ç»„ä»¶åŒ–</h2> <pre><code>ç°åœ¨å‰ç«¯å¤§éƒ½æ¨å´‡ç»„ä»¶åŒ–æ€æƒ³ï¼ŒReact.jsä¹Ÿä¸ä¾‹å¤–ï¼Œé‚£åˆ°åº•ä»€ä¹ˆæ˜¯ç»„ä»¶åŒ–ï¼Ÿæˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹è¯´èµ·ã€‚
  ![](https://cdn.nlark.com/yuque/0/2019/png/240921/1554191857857-6a224ff5-5599-4811-afb8-fc528cc9586b.png)![](https://cdn.nlark.com/yuque/0/2019/png/240921/1554191857872-487a88e1-f4d8-445a-a139-4e16b0e8d506.png)
</code></pre> <p>è¿™æ˜¯ä¸€ä¸ªç‚¹èµæŒ‰é’®ï¼Œç‚¹å‡»åä¼šåœ¨&quot;ç‚¹èµ&quot;å’Œ&quot;å–æ¶ˆ&quot;ä¹‹é—´åˆ‡æ¢ã€‚</p> <p>å¦‚æœä½ å¯¹å‰ç«¯æœ‰äº›äº†è§£çš„è¯ï¼Œè¿™ç‚¹ä¸œè¥¿ä¸åœ¨è¯ä¸‹ï¼Œç›´æ¥ä¸Šæ‰‹ã€‚</p> <p>â€‹
1
...//çœç•¥çš„å…¬å…±éƒ¨åˆ†
2
</p><body>
3
<div class="wrapper">
4
<button class="like-btn">
5
<span class="like-text">ç‚¹èµ</span>
6
<span>ğŸ‘</span>
7
</button>
8
</div>
9
</body>
10
...
â€‹<p></p> <p>â€‹
1
const button = document.querySelector('.like-btn') // è·å–æŒ‰é’®DOM
2
const buttonText = button.querySelector('.like-text') // è·å–æŒ‰é’®å†…éƒ¨æ–‡å­—
3
let isLiked = false
4
button.addEventListener('click', () =&gt; {         // äº‹ä»¶ç›‘å¬
5
isLiked = !isLiked
6
if (isLiked) {
7
buttonText.innerHTML = 'å–æ¶ˆ'
8
} else {
9
buttonText.innerHTML = 'ç‚¹èµ'
10
}
11
}, false)
â€‹
ç°åœ¨ä¸€ä¸ªç®€å•çš„ç‚¹èµæŒ‰é’®å°±å†™å¥½äº†ã€‚å¯æ˜¯ä½ å‘ç°å¦å¤–ä¸€ä¸ªé¡µé¢ä¹Ÿéœ€è¦è¿™æ ·çš„æŒ‰é’®ï¼ŒåŒäº‹çš„é¡¹ç›®ä¸­ä¹Ÿéœ€è¦è¿™ä¸ªåŠŸèƒ½ï¼Œä½ ç°åœ¨åªæœ‰ä¸€ç§æ–¹æ³•ï¼šå°†htmlç»“æ„å’ŒJavaScriptä»£ç ç»Ÿç»Ÿå¤åˆ¶ç²˜è´´è¿‡å»ã€‚è¿™æ ·çš„å®ç°æ–¹å¼æ²¡æœ‰ä»»ä½•å¯å¤ç”¨æ€§ã€‚</p> <p>ç»“æ„å¤ç”¨ä¸ç®€å•ç»„ä»¶åŒ–
ç°åœ¨æˆ‘ä»¬é‡å†™è¿™ä¸ªç‚¹èµæŒ‰é’®ï¼Œè®©å®ƒå…·æœ‰ä¸€å®šçš„å¯å¤ç”¨æ€§ã€‚é¦–å…ˆæˆ‘ä»¬å†™ä¸€ä¸ªclassç±»ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°±å«ä»–renderæ–¹æ³•ï¼ˆç”¨åˆ°ES6çš„å­—ç¬¦ä¸²æ¨¡å— <code></code>ï¼‰ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›äº†ä¸€æ®µæ ‡è¯†HTMLç»“æ„çš„å­—ç¬¦ä¸²ã€‚</p> <p>â€‹
1
class LikeButton {
2
render() {
3
return <code>4 &lt;button id='like-btn'&gt; 5 &lt;span class='like-text'&gt;èµ&lt;/span&gt; 6 &lt;span&gt;ğŸ‘&lt;/span&gt; 7 &lt;/button&gt; 8</code>
9
}
10
}
â€‹
ç„¶åæˆ‘ä»¬å°±èƒ½ç”¨è¿™ä¸ªç±»æ¥æ„é€ ä¸åŒçš„å®ä¾‹æŒ‰é’®</p> <p>â€‹
1
const wrapper = document.querySelector('.wrapper');  // è·å–div
2
const likeButton1 = new LikeButton();   // æ„å»ºå®ä¾‹
3
wrapper.innerHTML = likeButton1.render();  //  å°†è¿”å›çš„å†…å®¹æ’å…¥divä¸­
â€‹
æˆ‘ä»¬ä½¿ç”¨innerHTMLç®€å•ç²—æš´çš„å°†æŒ‰é’®æŒ‰è¿›wrapperä¸­ã€‚ä½†æ˜¯ä½ ä¼šå‘ç°ï¼šæŒ‰é’®DOMæ˜¯æœ‰äº†ï¼Œé‚£ä¹ˆç‚¹å‡»äº‹ä»¶æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬è¿™ä¸ªLikeButtonç±»ä¸­æ‰€è¿”å›çš„buttonå°±æ˜¯ä¸€æ®µå­—ç¬¦ä¸²ï¼Œæ— æ³•ç»™å…¶æ·»åŠ äº‹ä»¶ï¼ŒDOMäº‹ä»¶çš„APIåªèƒ½æ·»åŠ åœ¨DOMèº«ä¸Šã€‚æ‰€ä»¥ç°åœ¨çš„é—®é¢˜å°±æ˜¯ï¼šæ€ä¹ˆå°†è¿™æ®µè¡¨ç¤ºDOMç»“æ„çš„å­—ç¬¦ä¸²å˜æˆçœŸæ­£çš„DOMï¼Ÿ</p> <pre><code>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå‡½æ•°å¯ä»¥å¸®æˆ‘ä»¬å®Œæˆè¿™ä¸ªåŠ¨ä½œï¼ŒcreateDOMFromStringï¼Œæˆ‘ä»¬å‘è¿™ä¸ªå‡½æ•°ä¸­ä¼ é€’ä¸€æ®µHTMLç»“æ„çš„å­—ç¬¦ä¸²ï¼Œä»–ä¼šå°†å¯¹äºçš„DOMç»“æ„è¿”å›ç»™æˆ‘ä»¬ã€‚ç°åœ¨æˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªå‡½æ•°é‡æ–°æˆ‘ä»¬çš„LikeButtonç±»
</code></pre> <p>â€‹
1
class LikeButton {
2
render() {
3
this.element = creatrDOMFromString(<code>4 &lt;button id='like-btn'&gt; 5 &lt;span class='like-text'&gt;èµ&lt;/span&gt; 6 &lt;span&gt;ğŸ‘&lt;/span&gt; 7 &lt;/button&gt; 8</code>);
9
this.element.addEventListener('click',() =&gt; console.log('click'),false);
10
return this.element;
11
}
12
}
â€‹
ç°åœ¨æˆ‘ä»¬renderè¿”å›çš„å¹¶ä¸åªæ˜¯ä¸€æ®µå­—ç¬¦ä¸²äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªå·²ç»æ·»åŠ è¿‡äº‹ä»¶çš„DOMï¼Œç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å°†DOMæ”¾ç½®åœ¨é¡µé¢ä¸Šï¼Œå› ä¸ºç°åœ¨å·²ç»ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨innerHTMLï¼Œè€Œæ˜¯ç”¨appendChild</p> <p>â€‹
1
const wrapper = document.querySelector('.wrapper');
2
const likeButton1 = new LikeButton();
3
wrapper.appendChild(likeButton1.render());
â€‹
ç°åœ¨ä½ å†ä¸€æ¬¡å°è¯•ç‚¹å‡»æŒ‰é’®ï¼Œå°±èƒ½åœ¨æ§åˆ¶å°çœ‹åˆ°æ‰“å°å‡ºçš„ 'click'ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å®Œæ•´çš„ç‚¹èµåŠŸèƒ½å†™å¥½</p> <p>â€‹
1
class LikeButton {
2
constructor() {
3
this.state = {isLiked: false};
4
};
5
changenLikeText() {
6
const likeText = this.element.querySelector('.like-text');
7
this.state.isLiked = !this.state.isLiked;
8
likeText.innerHTML = this.state.isLiked ? 'å–æ¶ˆ':'ç‚¹èµ';
9
}ï¼›
10
render() {
11
this.element = createDOMFromString(<code>12 &lt;button id='like-btn'&gt; 13 &lt;span class='like-text'&gt;èµ&lt;/span&gt; 14 &lt;span&gt;ğŸ‘&lt;/span&gt; 15 &lt;/button&gt; 16</code>);
17
this.element.addEventListener('click',this.changeLikeText.bind(this),false);
18
return this.element;
19
}
20
}
21
â€‹
22
â€‹
â€‹
è¿™ä¸ªæ„é€ å‡½æ•°æ·»åŠ äº†ä¸€ä¸ªå¯¹è±¡stateç”¨æ¥ä¿å­˜å½“å‰æŒ‰é’®çš„çŠ¶æ€ï¼Œè¿˜ç»™æŒ‰é’®æ–°ç»‘å®šäº†äº‹ä»¶ï¼Œç‚¹å‡»ä¼šè§¦å‘æŒ‰é’®çš„æ–‡æœ¬æ”¹å˜ã€‚ç°åœ¨åªè¦åœ¨çš„åœ°æ–¹å®ä¾‹åŒ–ä¸€ä¸‹ï¼Œå°±å¯ä»¥è½»æ¾ä½¿ç”¨ã€‚</p> <p>ä¼˜åŒ–DOMæ“ä½œ
ä¸Šé¢å®ç°äº†ç‚¹èµæŒ‰é’®çš„å¤ç”¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç®€æ˜“çš„ç»„ä»¶ï¼Œä¸è¿‡æˆ‘ä»¬å‘ç°åœ¨changeTextæ–¹æ³•ä¸­æœ‰æ‰‹åŠ¨æ“ä½œDOMçš„åŠ¨ä½œï¼Œæ˜¯å› ä¸ºæ•°æ®æ”¹å˜æˆ‘ä»¬è¦å»æ›´æ–°é¡µé¢å†…å®¹ï¼Œé‚£ä¹ˆå‡è®¾ç°åœ¨æœ‰ä¸æ­¢ä¸€ä¸ªæ•°æ®å¯ä»¥æ›´æ”¹é¡µé¢å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„æ‰‹åŠ¨æ“ä½œDOMå—ï¼Ÿè¿™é‡Œæœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆï¼šä¸€æ—¦æœ‰æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬å°±é‡æ–°è°ƒç”¨renderï¼Œæ„å»ºä¸€ä¸ªæ–°çš„DOMã€‚</p> <p>â€‹
1
class LikeButton {
2
constructor() {
3
this.state = {isLiked: false};
4
}
5
setState(state) {
6
this.state = state;
7
this.element = this.render();
8
};
9
changenLikeText() {
10
this.setState({
11
isLiked: !this.state.isLiked
12
})
13
};
14
render() {
15
this.element = createDOMFromString(<code>16 &lt;button id='like-btn'&gt; 17 &lt;span class='like-text'&gt;${this.state.isLiked ? 'å–æ¶ˆ':'ç‚¹èµ'}&lt;/span&gt; 18 &lt;span&gt;ğŸ‘&lt;/span&gt; 19 &lt;/button&gt; 20</code>);
21
this.element.addEventListener('click',this.changeLikeText.bind(this),false);
22
return this.element;
23
}
24
}
â€‹
å¯¹æ¯”ä¸€ä¸‹æ›´æ–°åçš„ä»£ç ï¼Œå¤šäº†setStateçš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªstateå‚æ•°ï¼ˆæ›´æ–°åçš„stateï¼‰ï¼Œåœ¨æ–¹æ³•å†…æˆ‘ä»¬æ›´æ–°äº†this.stateï¼Œç„¶ååˆè°ƒç”¨äº†renderæ–¹æ³•ï¼Œæ ¹æ®æ–°çš„stateåˆ›å»ºäº†æ–°çš„DOMã€‚è¿™æ ·å°±é¿å…äº†æ‰‹åŠ¨DOMçš„åŠ¨ä½œã€‚ç°åœ¨åªæ˜¯æ–°æ„å»ºäº†DOMï¼Œå¹¶æ²¡æœ‰è¡¨ç°åœ¨é¡µé¢ä¸Šï¼Œç»§ç»­ä¿®æ”¹ä»£ç ä¸­çš„setStateæ–¹æ³•</p> <p>â€‹
1
...
2
setState(state) {
3
const oldEle = this.element;
4
this.state = state;
5
this.element = this.render();
6
if(this.onStateChange){
7
this. onStateChange(oleEle,this.element)
8
}
9
}
10
...
11
â€‹
12
// ç„¶ååœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™
13
const likeButton = new LikeButton(); // å®ä¾‹åŒ–ç»„ä»¶
14
wrapper.appendChild(likeButton.render()) // ç¬¬ä¸€æ¬¡æ’å…¥ DOM å…ƒç´ 
15
likeButton.onStateChange = (oldEle, newEle) =&gt; {
16
wrapper.insertBefore(newEle, oldEle) // æ’å…¥æ–°çš„å…ƒç´ 
17
wrapper.removeChild(oldEle) // åˆ é™¤æ—§çš„å…ƒç´ 
18
}
â€‹
ç°åœ¨ï¼Œæ¯ä¸€æ¬¡steStateéƒ½ä¼šè°ƒç”¨onStateChangeæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨å®ä¾‹åŒ–åæ³¨å…¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥éšæ„ç¼–å†™è¿™ä¸ªæ–¹æ³•ã€‚æ¯å½“stateå‘ç”Ÿå˜åŒ–ï¼Œè§¦å‘setStateï¼Œç„¶åè°ƒç”¨onStateChangeï¼Œæˆ‘ä»¬å°±èƒ½åœ¨é¡µé¢ä¸Šæ’å…¥æ–°DOMå¹¶åˆ é™¤æ—§çš„DOMï¼Œè™½ç„¶ä¹Ÿå¾ˆæš´åŠ›å¹¶ä¸”ä¸¥é‡å½±å“æ€§èƒ½ï¼Œä½†æ˜¯åœ¨Reactä¸­ï¼Œä¼šè¢«ä¸€ç§Virtual-DOMçš„ç­–ç•¥æœ‰æ•ˆè§£å†³ã€‚</p> <p>æŠ½å‡ºç»„ä»¶çš„å…¬å…±æ–¹æ³•
ä¸Šé¢å·²ç»å®Œæˆäº†ä¸€ä¸ªç‚¹èµæŒ‰é’®çš„ç»„ä»¶ï¼Œç«™åœ¨æ›´é•¿è¿œçš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†å½“å‰è¿™ä¸ªæ¨¡å¼ç»™æŠ½è±¡å‡ºæ¥ï¼Œä»¥ä¾¿å†™æ›´å¤šçš„ç»„ä»¶ã€‚</p> <p>â€‹
1
class Component {
2
constructor(props={}){
3
this.props = props;
4
}
5
setState(state) {
6
const oldEle = this.element;
7
this.state = state;
8
this.element = this.renderDOM();
9
if(onStateChange) this.onStateChange(oldEle,this.element)
10
}
11
renderDOM(){
12
this.element = createDOMFromString(this.render());
13
if(this.onClick){
14
this.element.addEventListener('click',this.onClick.bind(this),false);
15
}
16
return this.element;
17
}
18
const createDOMFromString = (domString) {
19
const div = document.createElement('div');
20
div.innerHTML = domString;
21
return div;
22
}
23
const mount = (component,wrapper) =&gt; {
24
wrapper.appenChild(component.renderDOM());
25
component.onStateChange = (oldEle,newEle) {
26
wrapper.insertBefore(newEle,oldEle);
27
wrapper.removeChild(oldEle);
28
}
29
}
30</p> <p>31
}
â€‹
ç°åœ¨è¿™ä¸ªComponentç±»æ¯”èµ·ä¹‹å‰çš„LikeButtonç±»å¤šäº†ä¸€ç‚¹ä¸œè¥¿ï¼Œæˆ‘ä»¬é€ä¸€åœ°çœ‹ä¸‹ï¼Œconstructorçš„propså‚æ•°æ˜¯ä»å¤–éƒ¨ä¼ å…¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥ä¸ªæ€§åŒ–ç»„ä»¶ï¼ŒrenderDOMå°±æ˜¯åŸæ¥çš„renderæ–¹æ³•ï¼Œè¿™é‡Œçš„createDOMFromStringåªæ˜¯ä¸ºæ„å»ºå‡ºçš„DOMæ·»åŠ ä¸€ä¸ªdivçˆ¶èŠ‚ç‚¹ï¼Œmountæ–¹æ³•æ˜¯å°†å½“å‰ç»„ä»¶è¿›è¡ŒæŒ‚è½½ï¼Œæ”¾ç½®åˆ°æˆ‘ä»¬é¢„æœŸçš„é¡µé¢ä¸Šã€‚</p> <p>â€‹
1
class LikeButton extends Component {
2
constrcutor(props) {
3
super(props);
4
this.state = {
5
isliked: false,
6
}
7
}
8
onClick = () {
9
this.setState({
10
color: 'blue',
11
})
12
}
13
render() {
14
return(<code>15 &lt;button class=&quot;like-btn&quot; style=&quot;background-color:${this.props.color}&quot;&gt; 16 &lt;span class=&quot;like-text&quot;&gt; 17 ${this.state.isliked ? 'å–æ¶ˆ' : 'ç‚¹èµ'} 18 &lt;/span&gt; 19 &lt;span&gt;ğŸ‘&lt;/span&gt; 20 &lt;/button&gt; 21</code>)
22
}
23
}
24
â€‹
25
const wrapper = document.querySelector('.wrapper');
26
mount(new LikeButton({color:'red'}),wrapper);
â€‹
ç°åœ¨é¡µé¢ä¸Šå°±å¤šäº†ä¸€ä¸ªçº¢è‰²ç‚¹èµæŒ‰é’®ã€‚åˆ°ç°åœ¨ï¼Œå·²ç»åŸºæœ¬å­¦ä¼šäº†reactç»„ä»¶çš„å†™æ³•ã€‚è¿™é‡Œçš„renderDOMå°±æ˜¯react.jsä¸­çš„renderå‡½æ•°ï¼Œæˆ‘ä»¬æœ€æ—©å®šä¹‰çš„createDOMFromStringå°±æ˜¯React.createElementæ–¹æ³•ï¼Œåªä¸è¿‡åœ¨reactä¸­å®ƒè§£æçš„æ˜¯JSXè¯­æ³•ã€‚è€Œè¿™ä¸ªmountå°±æ˜¯ReactDOM.renderæ–¹æ³•ï¼Œå°†ç»„ä»¶æŒ‚è½½åˆ°æŒ‡å®šèŠ‚ç‚¹ã€‚</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        â†
        <a href="/Pages/JavaScript.html" class="prev">
          JavaScript
        </a></span> <span class="next"><a href="/Pages/demo.html">
          ç½‘ç»œåŸºç¡€
        </a>
        â†’
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.ea509887.js" defer></script><script src="/assets/js/5.e1836220.js" defer></script>
  </body>
</html>
