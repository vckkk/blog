(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{254:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("JavaScriptä¸­çš„å¼‚æ­¥ç¼–ç¨‹ ---- Promise")]),t._v(" "),a("p",[t._v("äº†è§£JavaScriptçš„å¼‚æ­¥ç¼–ç¨‹ä¹‹å‰éœ€è¦å…ˆå­¦ä¹ "),a("a",{attrs:{href:"https://blog.webhbz.com/Pages/eventloop.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScriptçš„æœ‰å…³è¿è¡Œæœºåˆ¶"),a("OutboundLink")],1),t._v("\nä¸ºäº†åœ¨æ•´ä½“ä¸Šæœ‰ä¸ªå……åˆ†çš„è®¤è¯†ï¼Œå¯ä»¥å…ˆé˜…è¯»ä¸€ä¸‹çŸ¥ä¹ä¸Šçš„è¿™ç¯‡"),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/66593213",target:"_blank",rel:"noopener noreferrer"}},[t._v("æ–‡ç« "),a("OutboundLink")],1),t._v("ï¼Œç›¸å¯¹ç®€å•ä¾¿äºç†è§£ã€‚")]),t._v(" "),a("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯promise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯promise","aria-hidden":"true"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯Promise")]),t._v(" "),a("p",[t._v("Promiseæœ€æ—©ç”±ç¤¾åŒºæå‡ºï¼Œæ˜¯ç”¨æ¥è§£å†³å›è°ƒåœ°ç‹±çš„æ–¹æ¡ˆï¼ŒES6 å°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡ã€‚")]),t._v(" "),a("blockquote",[a("p",[t._v("æ‰€è°“çš„"),a("code",[t._v("Promise")]),t._v("ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚   ---- ã€ŠECMAScript 6 å…¥é—¨ã€‹")])]),t._v(" "),a("p",[t._v("Promiseå¯¹è±¡åœ¨åˆ›å»ºåï¼Œå°±ä¼šåˆ›å»ºå†…éƒ¨çŠ¶æ€æœºï¼ŒPromiseå¯¹è±¡ä»£è¡¨äº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè€ŒçŠ¶æ€æœºå°±åŒ…å«äº†è¿™ä¸ªå¼‚æ­¥æ“ä½œçš„çŠ¶æ€ï¼Œ"),a("code",[t._v("pendding")]),t._v("ï¼Œ"),a("code",[t._v("fulfilled")]),t._v("ï¼Œ"),a("code",[t._v("rejected")]),t._v("ï¼Œ\nåœ¨"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡ä¸­ï¼Œåªä¼šå­˜åœ¨ä¸Šè¿°ä¸‰ç§çŠ¶æ€ä¸­çš„ä¸€ç§ï¼Œä¸”ä¸ºä¸å¯é€†çš„ï¼Œä¸å—å¤–ç•Œå½±å“ã€‚")]),t._v(" "),a("h2",{attrs:{id:"åˆ›å»ºä»¥åŠä½¿ç”¨promise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºä»¥åŠä½¿ç”¨promise","aria-hidden":"true"}},[t._v("#")]),t._v(" åˆ›å»ºä»¥åŠä½¿ç”¨Promise")]),t._v(" "),a("p",[t._v("åœ¨ES6ä¸­æœ‰åŸç”Ÿçš„Promiseæ„é€ å‡½æ•°ï¼Œä½¿ç”¨å…³é”®å­—"),a("code",[t._v("new")]),t._v(" æ¥åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡ã€‚")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä¸ºå‚æ•°ï¼Œå°†è¿™ä¸ªå‚æ•°æš‚åä¸º'fn' ï¼Œ'fn'åˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä¸”å‡ä¸ºå‡½æ•°")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" flag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä½¿ç”¨resolveå°†promiseçŠ¶æ€ä»pendingå˜ä¸ºresolved'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å¤§äº0.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ä½¿ç”¨rejectå°†promiseçŠ¶æ€ä»pendingå˜ä¸ºrejected'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å°äº0.5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -- 'å¤§äº0.5'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// -- 'å°äº0.5'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("p",[t._v("æˆ‘ä»¬æ¥ä¸€ç‚¹ç‚¹æ‹†åˆ†è¿™ä¸ª"),a("code",[t._v("Promise")]),t._v("ï¼Œå¥¹æ¥æ”¶äº†ä¸€ä¸ªå‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°åˆæœ‰ä¸¤ä¸ªå‚æ•°"),a("code",[t._v("resolve")]),t._v("ï¼Œ"),a("code",[t._v("reject")]),t._v("ï¼Œè¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯Promiseä¸ºæˆ‘ä»¬åˆ›å»ºå¥½çš„"),a("code",[t._v("å‡½æ•°")]),t._v("ã€‚è¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†"),a("code",[t._v("Promise")]),t._v("çš„çŠ¶æ€ä»"),a("code",[t._v("pending")]),t._v("ï¼ˆç­‰å¾…ï¼‰è½¬æ¢ä¸º"),a("code",[t._v("resolved")]),t._v("ï¼ˆå·²è§£å†³ï¼‰æˆ–è€…ä»"),a("code",[t._v("pending")]),t._v("ï¼ˆç­‰å¾…ï¼‰è½¬æ¢ä¸º"),a("code",[t._v("rejected")]),t._v("ï¼ˆå·²å¤±è´¥ï¼‰ã€‚\nè€Œåœ¨Promiseåˆ›å»ºåï¼Œæœ‰ä¸€äº›è‡ªèº«çš„æ–¹æ³•ã€‚è¿™é‡Œå…ˆåªè¯´"),a("code",[t._v("then")]),t._v("ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸¤ä¸ª"),a("code",[t._v("å‡½æ•°")]),t._v("ä½œä¸ºå‚æ•°ï¼Œè¿™é‡Œå°±å’Œä¸Šé¢ä¼ å…¥Promiseçš„æ„é€ å‡½æ•°ä¸­çš„å‚æ•°å‡½æ•°ï¼ˆ"),a("code",[t._v("fn")]),t._v("ï¼‰çš„ä¸¤ä¸ªå‚æ•°ï¼ˆ"),a("code",[t._v("resolve")]),t._v(","),a("code",[t._v("reject")]),t._v("ï¼‰å¯¹åº”ä¸Šäº†ã€‚å¾ˆæ˜¾ç„¶ï¼Œ"),a("code",[t._v("then")]),t._v("æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°ï¼Œæ¥æ”¶åˆ°"),a("code",[t._v("resolve")]),t._v("ä¼ é€’å‡ºçš„æ•°æ®ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°å°±æ¥æ”¶åˆ°äº†"),a("code",[t._v("reject")]),t._v("ä¼ é€’å‡ºçš„æ•°æ®ã€‚\né‚£ä¹ˆ"),a("code",[t._v("Promise")]),t._v("æ˜¯æ€ä¹ˆè§£å†³å¼‚æ­¥æ“ä½œçš„å›è°ƒåœ°ç‹±å‘¢ï¼Ÿç®€å•çš„è¯´å°±æ˜¯ç”¨"),a("code",[t._v("Promsie")]),t._v("å¯¹è±¡åŒ…è£¹ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå¼‚æ­¥æ“ä½œåªåœ¨"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡å†…éƒ¨ï¼Œä¸å—å¤–éƒ¨å½±å“åŒæ—¶ä¹Ÿä¸é˜»å¡å¤–éƒ¨ï¼Œåœ¨è¿™ä¸ªå¼‚æ­¥æ“ä½œæœ‰äº†ç»“æœåï¼Œé€šè¿‡"),a("code",[t._v("then")]),t._v("æ–¹æ³•å’Œå¤–éƒ¨è¿›è¡Œæ•°æ®ä¼ é€’ã€‚å¦‚ä¸‹ï¼š")]),t._v(" "),a("div",{staticClass:"language-JavaScript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" promise "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        Math"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("random")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fail'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\npromise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("p",[t._v("è¿™é‡Œçš„"),a("code",[t._v("setTimeout")]),t._v("å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œåœ¨1ç§’åå¾—åˆ°ç»“æœã€‚è‹¥å¤§äº0.5çš„è¯ï¼Œ"),a("code",[t._v("resolve")]),t._v("å°±ä¼šæ‰§è¡Œï¼Œåˆ™"),a("code",[t._v("Promise")]),t._v("çš„çŠ¶æ€ä»"),a("code",[t._v("pending")]),t._v("å˜ä¸º"),a("code",[t._v("fulfilled")]),t._v("ï¼Œå¦åˆ™å˜ä¸º"),a("code",[t._v("rejected")]),t._v("ï¼Œå¼‚æ­¥æ“ä½œä¸­çš„æ•°æ®(â€˜successâ€™æˆ–â€˜failâ€™)ä¼šé€šè¿‡å‡½æ•°ä¼ é€’åˆ°"),a("code",[t._v("Promise")]),t._v("å¤–éƒ¨ï¼Œæˆ‘ä»¬é€šè¿‡"),a("code",[t._v("then")]),t._v("è·å–åˆ°è¯¥æ•°æ®.\né‚£ä¹ˆç®€å•çš„"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡æˆ‘ä»¬å·²ç»äº†è§£äº†,ä½†æ˜¯ä»–æ˜¯æ€ä¹ˆæ¥è§£å†³å›ç­”åœ°ç‹±çš„å‘¢?å…¶å®å¾ˆç®€å•,å› ä¸º"),a("code",[t._v("then")]),t._v("æ–¹æ³•ä¼š"),a("code",[t._v("return")]),t._v("ä¸€ä¸ª"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡æ¥ä¾›æˆ‘ä»¬ä½¿ç”¨.åŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºæ–°çš„"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡.\nä¸¾ä¸ªğŸŒ°")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pm1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å‡è£…è¿™æ˜¯å¼‚æ­¥æ“ä½œçš„æˆåŠŸçš„ç»“æœ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @1 ä½¿ç”¨return é»˜è®¤çš„Promiseå¯¹è±¡")]),t._v("\npm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ¥æ”¶Promiseä¼ å‡ºçš„:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æˆ‘æ˜¯è¢«then returnå‡ºæ¥çš„'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æ¥æ”¶ä¸Šä¸€ä¸ªthen:"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"æˆ‘è¿˜æ˜¯è¢«then returnå‡ºæ¥çš„"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ¥æ”¶ä¸Šä¸€ä¸ªthen:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("æ§åˆ¶å°æ‰“å°å¦‚ä¸‹\næ¥æ”¶Promiseä¼ å‡ºçš„"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" å‡è£…è¿™æ˜¯å¼‚æ­¥æ“ä½œçš„æˆåŠŸçš„ç»“æœ\næ¥æ”¶ä¸Šä¸€ä¸ªthen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" æˆ‘æ˜¯è¢«then "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("å‡ºæ¥çš„\næ¥æ”¶ä¸Šä¸€ä¸ªthen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" æˆ‘è¿˜æ˜¯è¢«then "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("å‡ºæ¥çš„\nPromise "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("resolved"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @2 æ‰‹åŠ¨åˆ›å»ºPromise")]),t._v("\npm1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm1å¼‚æ­¥:"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pm2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pm2å¼‚æ­¥æ“ä½œæˆåŠŸçš„ç»“æœ'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" pm2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pm2å¼‚æ­¥:"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("result2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" æ§åˆ¶å°æ‰“å°å¦‚ä¸‹\npm1å¼‚æ­¥"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" å‡è£…è¿™æ˜¯å¼‚æ­¥æ“ä½œçš„æˆåŠŸçš„ç»“æœ\nPromise "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pending"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2så")]),t._v("\npm2å¼‚æ­¥"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pm2å¼‚æ­¥æ“ä½œæˆåŠŸçš„ç»“æœ\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n")])])]),a("p",[t._v("è¿™å°±æ˜¯å¸¸è§çš„"),a("code",[t._v("Promis")]),t._v("çš„é“¾å¼è°ƒç”¨,å…¶å®"),a("code",[t._v("Promise")]),t._v("å°±æ˜¯åŸç”Ÿå°è£…çš„ä¸€ä¸ªå¯¹è±¡,çº¦å®šåˆ›å»ºæ˜¯ä¼ å…¥ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«åœ¨æˆåŠŸå’Œå¤±è´¥åè°ƒç”¨,åˆåœ¨"),a("code",[t._v("then")]),t._v("çš„ä¸¤å‚æ•°(å‡ä¸ºå‡½æ•°)ä¸­è·å–.ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹"),a("code",[t._v("catch")]),t._v("å’Œå…¶ä»–åŸç”Ÿæ–¹æ³•çš„ä½¿ç”¨åœºæ™¯.")]),t._v(" "),a("h3",{attrs:{id:"catch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#catch","aria-hidden":"true"}},[t._v("#")]),t._v(" catch")]),t._v(" "),a("p",[t._v("ä¸€å¥è¯æ¥è§£é‡Š,"),a("code",[t._v("catch")]),t._v(" === "),a("code",[t._v("then(null,reject)")]),t._v(".\n"),a("code",[t._v("catch")]),t._v("æ˜¯ç”¨æ¥æ•æ‰"),a("code",[t._v("Promis")]),t._v("ä¸­çš„å¼‚å¸¸,ä¹Ÿå°±æ˜¯å¤±è´¥åä¼ é€’å‡ºçš„ä¿¡æ¯."),a("code",[t._v("then")]),t._v("æ˜¯å¯ä»¥åŒæ—¶æ¥å—å¤±è´¥å’ŒæˆåŠŸå"),a("code",[t._v("Promise")]),t._v("ä»å†…éƒ¨ä¼ å‡ºçš„æ•°æ®,ä½†æ˜¯æœªæ¥æ–¹ä¾¿é˜…è¯»å’Œç»´æŠ¤,ä¸€èˆ¬åœ¨"),a("code",[t._v("then")]),t._v("ä¸­åªæ‰§è¡ŒæˆåŠŸçš„.æˆ‘ä»¬å°†æ•´ä¸ªè¿‡ç¨‹ä¸­çš„å¼‚å¸¸æ”¾åˆ°æœ€å,é€šè¿‡"),a("code",[t._v("catch")]),t._v("æ¥æ•è·.å†ä¸¾ä¸ªğŸŒ°:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pmCatch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fail'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\npmCatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'this is then'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pmCatch2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("reject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'success'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" pmCatch2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  cpnsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'then:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'catch:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("æ§åˆ¶å°æ‰“å°å¦‚ä¸‹\ncatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fail\nPromise "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("resolved"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n\n")])])]),a("p",[t._v("çœ‹ä¸‹æ‰“å°ç»“æœ,å¥½åƒè·Ÿæƒ³è±¡ä¸­çš„ä¸å¤ªä¸€æ ·.è¿™é‡Œæ²¡æœ‰æ‰“å°å‡ºâ€˜this is thenâ€™å’Œâ€˜then:successâ€™,è€Œæ˜¯ç›´æ¥æ‰“å°äº†â€˜catch: failâ€™.æ˜æ˜¾çš„åœ¨æ•´ä¸ª"),a("code",[t._v("Promise")]),t._v("é“¾ä¸­,åªè¦å‡ºç°äº†"),a("code",[t._v("reject")]),t._v("äº†,æ•´ä¸ª"),a("code",[t._v("Promise")]),t._v("çš„çŠ¶æ€å°±ä¼šå‡å›ºä¸”ä¸ä¼šå˜åŒ–.å¦å¤–,"),a("code",[t._v("then")]),t._v("æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«"),a("code",[t._v("catch")]),t._v("æ–¹æ³•æ•è·ã€‚è€Œä¸”"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡å¯¹äºå¼‚å¸¸æœ‰ç±»ä¼¼å†’æ³¡çš„æ€§è´¨,å¼‚å¸¸ä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ª"),a("code",[t._v("catch")]),t._v("è¯­å¥æ•è·ã€‚")]),t._v(" "),a("h3",{attrs:{id:"promise-finally"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promise-finally","aria-hidden":"true"}},[t._v("#")]),t._v(" Promise.finally()")]),t._v(" "),a("p",[a("code",[t._v("finally")]),t._v("æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡"),a("code",[t._v("Promise")]),t._v("å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•ï¼Œéƒ½ä¼šæ‰§è¡Œçš„æ“ä½œã€‚è¯¥æ–¹æ³•æ˜¯ ES2018 å¼•å…¥æ ‡å‡†çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\npromise\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Â·Â·Â·"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Â·Â·Â·"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finally")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Â·Â·Â·"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"promise-all"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promise-all","aria-hidden":"true"}},[t._v("#")]),t._v(" Promise.all()")]),t._v(" "),a("p",[a("code",[t._v("Promise.all()")]),t._v("æ–¹æ³•ç”¨äºå°†å¤šä¸ª"),a("code",[t._v("Promise")]),t._v("å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„"),a("code",[t._v("Promise")]),t._v("å®ä¾‹.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("p1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" p3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// p1 p2 p3 å‡ä¸ºPromiseå¯¹è±¡")]),t._v("\n")])])]),a("p",[a("code",[t._v("Promise.all()")]),t._v("æ–¹æ³•çš„å‚æ•°å¯ä»¥ä¸æ˜¯æ•°ç»„ï¼Œä½†å¿…é¡»å…·æœ‰"),a("code",[t._v("Iterator")]),t._v("æ¥å£ï¼Œä¸”è¿”å›çš„æ¯ä¸ªæˆå‘˜éƒ½æ˜¯"),a("code",[t._v("Promise")]),t._v("å®ä¾‹ã€‚\n"),a("code",[t._v("p")]),t._v("çš„çŠ¶æ€ç”±"),a("code",[t._v("p1")]),t._v("ã€"),a("code",[t._v("p2")]),t._v("ã€"),a("code",[t._v("p3")]),t._v("å†³å®šï¼Œåˆ†æˆä¸¤ç§æƒ…å†µã€‚")]),t._v(" "),a("ul",[a("li",[t._v("åªæœ‰"),a("code",[t._v("p1")]),t._v("ã€"),a("code",[t._v("p2")]),t._v("ã€"),a("code",[t._v("p3")]),t._v("çš„çŠ¶æ€éƒ½å˜æˆ"),a("code",[t._v("fulfilled")]),t._v("ï¼Œ"),a("code",[t._v("p")]),t._v("çš„çŠ¶æ€æ‰ä¼šå˜æˆ"),a("code",[t._v("fulfilled")]),t._v("ï¼Œæ­¤æ—¶"),a("code",[t._v("p1")]),t._v("ã€"),a("code",[t._v("p2")]),t._v("ã€"),a("code",[t._v("p3")]),t._v("çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä¼ é€’ç»™"),a("code",[t._v("p")]),t._v("çš„å›è°ƒå‡½æ•°ã€‚")]),t._v(" "),a("li",[t._v("åªè¦"),a("code",[t._v("p1")]),t._v("ã€"),a("code",[t._v("p2")]),t._v("ã€"),a("code",[t._v("p3")]),t._v("ä¹‹ä¸­æœ‰ä¸€ä¸ªè¢«"),a("code",[t._v("rejected")]),t._v("ï¼Œ"),a("code",[t._v("p")]),t._v("çš„çŠ¶æ€å°±å˜æˆ"),a("code",[t._v("rejected")]),t._v("ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªè¢«"),a("code",[t._v("reject")]),t._v("çš„å®ä¾‹çš„è¿”å›å€¼ï¼Œä¼šä¼ é€’ç»™"),a("code",[t._v("p")]),t._v("çš„å›è°ƒå‡½æ•°ã€‚")])]),t._v(" "),a("p",[t._v("ä¸€èˆ¬çš„ä½¿ç”¨åœºæ™¯æ˜¯æ•°æ®åŒæ—¶ä¾èµ–äºå¤šä¸ªè¯·æ±‚çš„è¿”å›å€¼æ—¶.")]),t._v(" "),a("h3",{attrs:{id:"promis-race"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promis-race","aria-hidden":"true"}},[t._v("#")]),t._v(" Promis.race()")]),t._v(" "),a("p",[a("code",[t._v("Promise.race()")]),t._v("æ–¹æ³•åŒæ ·æ˜¯å°†å¤šä¸ª"),a("code",[t._v("Promise")]),t._v("å®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„"),a("code",[t._v("Promise")]),t._v("å®ä¾‹ã€‚å…¶å‚æ•°æ ¼å¼åŒ"),a("code",[t._v("Promise.all()")]),t._v(";")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Promise"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("p1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" p2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" p3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// p1 p2 p3 å‡ä¸ºPromiseå¯¹è±¡")]),t._v("\n")])])]),a("p",[t._v("åªè¦"),a("code",[t._v("p1")]),t._v("ã€"),a("code",[t._v("p2")]),t._v("ã€"),a("code",[t._v("p3")]),t._v("ä¹‹ä¸­æœ‰ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€ï¼Œ"),a("code",[t._v("p")]),t._v("çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜ã€‚é‚£ä¸ªç‡å…ˆæ”¹å˜çš„"),a("code",[t._v("Promise")]),t._v("å®ä¾‹çš„è¿”å›å€¼ï¼Œå°±ä¼ é€’ç»™"),a("code",[t._v("p")]),t._v("çš„å›è°ƒå‡½æ•°ã€‚â€œè¡Œâ€å¦‚å…¶å,ç«è·‘.è°æœ€æ—©è·‘å®Œå¬è°çš„.")]),t._v(" "),a("h3",{attrs:{id:"promise-any"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#promise-any","aria-hidden":"true"}},[t._v("#")]),t._v(" Promise.any()")]),t._v(" "),a("p",[a("code",[t._v("Promise.any()")]),t._v("æ–¹æ³•æ¥å—ä¸€ç»„"),a("code",[t._v("Promise")]),t._v("å®ä¾‹ä½œä¸ºå‚æ•°ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„"),a("code",[t._v("Promise")]),t._v("å®ä¾‹ã€‚åªè¦å‚æ•°å®ä¾‹æœ‰ä¸€ä¸ªå˜æˆ"),a("code",[t._v("fulfilled")]),t._v("çŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆ"),a("code",[t._v("fulfilled")]),t._v("çŠ¶æ€ï¼›å¦‚æœæ‰€æœ‰å‚æ•°å®ä¾‹éƒ½å˜æˆ"),a("code",[t._v("rejected")]),t._v("çŠ¶æ€ï¼ŒåŒ…è£…å®ä¾‹å°±ä¼šå˜æˆ"),a("code",[t._v("rejected")]),t._v("çŠ¶æ€ã€‚")]),t._v(" "),a("h3",{attrs:{id:"å…¶ä»–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¶ä»–","aria-hidden":"true"}},[t._v("#")]),t._v(" å…¶ä»–")]),t._v(" "),a("p",[t._v("å…¶ä»–çš„è¿˜æœ‰"),a("code",[t._v("Promise.resolve()")]),t._v(","),a("code",[t._v("Promise.reject()")]),t._v(",ä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•è¯¦æƒ…å‚è€ƒé˜®å¤§çš„"),a("a",{attrs:{href:"http://es6.ruanyifeng.com/#docs/promise#Promise-resolve",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠES6å…¥é—¨ã€‹"),a("OutboundLink")],1)])])},[],!1,null,null,null);s.default=e.exports}}]);